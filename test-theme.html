<!DOCTYPE html>
<html>
<head>
    <title>Theme Toggle Test</title>
    <link rel="stylesheet" href="_site/assets/css/main.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
    <style>
        /* Additional styles to ensure button visibility */
        #theme-toggle {
            background: none;
            border: 1px solid var(--fg);
            color: var(--fg);
            cursor: pointer;
            padding: 0.5em 1em;
            margin: 1em;
            font-size: 1em;
        }
        
        #theme-toggle:hover {
            color: var(--highlight);
            border-color: var(--highlight);
        }
        
        body {
            padding: 2em;
        }
        
        .test-box {
            background: var(--bg-alt);
            color: var(--fg);
            padding: 2em;
            margin: 2em 0;
            border: 1px solid var(--border);
        }
    </style>
</head>
<body>
    <h1>Theme Toggle Test</h1>
    
    <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">
        <i class="fa fa-moon-o" aria-hidden="true"></i>
        Toggle Theme
    </button>
    
    <div class="test-box">
        <h2>Test Box</h2>
        <p>This box should change colors when you toggle the theme.</p>
        <p>Current theme: <span id="current-theme">light</span></p>
    </div>
    
    <script>
        // Theme toggle functionality
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = themeToggle.querySelector('i');
        const html = document.documentElement;
        const currentThemeSpan = document.getElementById('current-theme');
        
        // Check for saved theme preference or default to 'light'
        const currentTheme = localStorage.getItem('theme') || 'light';
        
        // Apply saved theme on page load
        if (currentTheme === 'dark') {
            html.setAttribute('data-theme', 'dark');
            themeIcon.classList.remove('fa-moon-o');
            themeIcon.classList.add('fa-sun-o');
            themeToggle.setAttribute('aria-label', 'Toggle light mode');
            currentThemeSpan.textContent = 'dark';
        }
        
        // Theme toggle click handler
        themeToggle.addEventListener('click', function() {
            console.log('Theme toggle clicked!');
            const isDark = html.getAttribute('data-theme') === 'dark';
            
            if (isDark) {
                // Switch to light mode
                html.removeAttribute('data-theme');
                themeIcon.classList.remove('fa-sun-o');
                themeIcon.classList.add('fa-moon-o');
                themeToggle.setAttribute('aria-label', 'Toggle dark mode');
                localStorage.setItem('theme', 'light');
                currentThemeSpan.textContent = 'light';
                console.log('Switched to light mode');
            } else {
                // Switch to dark mode
                html.setAttribute('data-theme', 'dark');
                themeIcon.classList.remove('fa-moon-o');
                themeIcon.classList.add('fa-sun-o');
                themeToggle.setAttribute('aria-label', 'Toggle light mode');
                localStorage.setItem('theme', 'dark');
                currentThemeSpan.textContent = 'dark';
                console.log('Switched to dark mode');
            }
        });
        
        console.log('Theme toggle script loaded');
    </script>
</body>
</html>